//@import "bootstrap/scss/functions";
//@import "bootstrap/scss/variables";

$dropdown-arrow-color: #e8eaed;

.sidebar {
  --base-clr: #11121a;
  --line-clr: #42434a;
  --hover-clr: #222533;
  --text-clr: #e6e6ef;
  --accent-clr: #5e63ff;
  --secondary-text-clr: #b0b3c1;

  box-sizing: border-box;
  height: 100%;
  width: 250px;
  padding: 5px;
  background-color: var(--base-clr);
  border-right: 1px solid var(--line-clr);

  position: sticky;
  top: 0;
  align-self: start;
  transition: 300ms ease-in-out;
  overflow: hidden;
  text-wrap: nowrap;

  &.close {
    padding: 5px;
    width:58px;

    .sidebar-logo {

    }

    .sidebar-toggle {
      margin-left: 0 !important;
    }
  }

  .sidebar-header {
    display: flex;
    margin-bottom: 16px;

    .sidebar-logo {
      font-weight: 600;
      transition: visibility 300ms ease-in-out;

      border-radius: .5em;
      padding: .85em;
      text-decoration: none;
      color: var(--text-clr);
      display: flex;
      align-items: center;
      gap: 1em;
    }


    .sidebar-toggle {
      margin-left: auto;
      padding: 10px;
      border: none;
      border-radius: .5em;
      background: none;
      cursor: pointer;

      &::after {
        content: ' ';
        display: block;
        width: 24px;
        height: 24px;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#{$dropdown-arrow-color}"><path d="m313-480 155 156q11 11 11.5 27.5T468-268q-11 11-28 11t-28-11L228-452q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l184-184q11-11 27.5-11.5T468-692q11 11 11 28t-11 28L313-480Zm264 0 155 156q11 11 11.5 27.5T732-268q-11 11-28 11t-28-11L492-452q-6-6-8.5-13t-2.5-15q0-8 2.5-15t8.5-13l184-184q11-11 27.5-11.5T732-692q11 11 11 28t-11 28L577-480Z"/> </svg>') no-repeat center/contain;
        transition: rotate 150ms ease;
      }

      &:hover {
        background-color: var(--hover-clr);
      }
    }
  }

  .sidebar-nav {
    padding: 0;
    list-style: none;

    .active a {
      color: var(--accent-clr);

      svg {
        fill: var(--accent-clr);
      }
    }

    svg {
      flex-shrink: 0;
      fill: var(--text-clr);
      width: 24px;
      height: 24px;
      padding: 5px;
      margin-right: 10px;

      //border: 1px solid white;
    }

    a,
    .sidebar-dropdown {
      border-radius: .5em;
      padding: 5px;
      text-decoration: none;
      color: var(--text-clr);
      display: flex;
      align-items: center;
      gap: 5px;

      //border: 1px solid white;
    }

    a span,
    .sidebar-dropdown span {
      flex-grow: 1;
      //border: 1px solid white;
    }

    a:hover,
    .sidebar-dropdown:hover {
      background-color: red;
    }


    .sidebar-dropdown {
      width: 100%;
      text-align: left;
      background: none;
      border: none;
      font: inherit;
      cursor: pointer;

      &::after {
        content: '';
        width: 24px;
        height: 24px;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="#{$dropdown-arrow-color}"><path d="M480-361q-8 0-15-2.5t-13-8.5L268-556q-11-11-11-28t11-28q11-11 28-11t28 11l156 156 156-156q11-11 28-11t28 11q11 11 11 28t-11 28L508-372q-6 6-13 8.5t-15 2.5Z"/></svg>') no-repeat center/contain;
        transition: 150ms ease;
      }

      &.rotate::after {
        transform: rotate(180deg);
      }
    }

    .sidebar-sub-nav {
      display: grid;
      max-height: 0;
      overflow: hidden;
      transition: max-height 150ms ease-in-out;

      &.show {
        max-height: 500px;
      }

      a {
        padding-left: 2em;
      }
    }
  }
}


@media(max-width: 800px) {
  .sidebar {
    height: 60px;
    width: 100%;
    border-right: none;
    border-top: 1px solid var(--line-clr);
    padding: 0;
    position: fixed;
    top: unset;
    bottom: 0;

    > ul {
      padding: 0;
      display: grid;
      grid-auto-columns: 60px;
      grid-auto-flow: column;
      align-items: center;
      overflow-x: scroll;
    }

    ul li {
      height: 100%;
    }

    ul a,
    ul .dropdown-btn {
      width: 60px;
      height: 60px;
      padding: 0;
      border-radius: 0;
      justify-content: center;
    }

    ul li span,
    ul li:first-child,
    .dropdown-btn svg:last-child {
      display: none;
    }

    ul li .sub-menu.show {
      position: fixed;
      bottom: 60px;
      left: 0;
      box-sizing: border-box;
      height: 60px;
      width: 100%;
      background-color: var(--hover-clr);
      border-top: 1px solid var(--line-clr);
      display: flex;
      justify-content: center;

      > div {
        overflow-x: auto;
      }

      li {
        display: inline-flex;
      }

      a {
        box-sizing: border-box;
        padding: 1em;
        width: auto;
        justify-content: center;
      }
    }
  }
}